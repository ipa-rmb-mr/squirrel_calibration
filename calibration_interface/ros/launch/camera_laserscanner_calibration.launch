<?xml version="1.0"?>

<launch>

	<arg name="reference" default="corner"/>	<!-- box or corner -->
	<arg name="marker" default="pitag"/>		<!-- checkerboard or pitag -->
	<arg name="robot" default="robotino"/>		<!-- robotino, cob or RAW -->

	<!-- Detect and publish reference frame using laserscanner -->
	<include file="$(find relative_localization)/ros/launch/$(arg reference)_localization.launch"/>

	<!-- Start markers based on reference frame -->
	<include file="$(find calibration_interface)/ros/launch/$(arg marker)_markers.launch"/>

	<!-- Detect and publish real marker frame using camera -->
	<node ns="checkerboard_detection" name="checkerboard_detection" pkg="calibration_interface" type="checkerboard_detection" output="screen">
		<rosparam command="load" file="$(find calibration_interface)/ros/launch/detection_settings/$(arg marker)_detection_settings.yaml"/>
		<rosparam command="load" file="$(find calibration_interface)/ros/launch/robot_settings/$(arg robot)_settings.yaml"/>
	</node>

	<!-- Start camera-laserscanner calibration method -->
	<node ns="camera_laserscanner_calibration" name="camera_laserscanner_calibration" pkg="calibration_interface" type="camera_laserscanner_calibration" output="screen">
		<rosparam command="load" file="$(find calibration_interface)/ros/launch/robot_settings/$(arg robot)_settings.yaml"/>
		<rosparam command="load" file="$(find calibration_interface)/ros/launch/calibration_settings/camera_laserscanner_calibration_$(arg marker)_params_$(arg robot).yaml"/>
		<param name="marker_type" value="$(arg marker)" />
	</node>

</launch>
